<!doctype html>
<html>
<head>
  <meta charset='utf-8'/>
  <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
  <title>data属性の値を取得および更新をしてみる</title>
</head>
<body>

<h3>目的</h3>
<ul>
  <li>data属性の値を取得および更新をしてみる
  <li>最初からdata-key属性を持っていると更新できないとwebで見たが更新できてしまっている。はて。
</ul>

<h3>確認方法</h3>
<ul>
  <li>F12で開発者ログのコンソールログを見る
</ul>

<h3>検証内容</h3>

<form id='myform'>
  <p><input type='text' id='mytext1' value='data属性を設定する'></p>
  <p><input type='text' id='mytext2' value='data属性を設定しない'></p>
  <p><input type='text' id='mytext3' value='もともとdata-key属性を持っている' data-key="it is a value"></p>
</form>

<script
  src='https://code.jquery.com/jquery-3.1.1.slim.min.js'
  integrity='sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc='
  crossorigin='anonymous'></script>
<script type='text/javascript'>

var log = function(){
  $('input').each(function(index, item){
    console.log(item.value, item.id, $(item).data('key'));
  });
}

// mytext1に値を設定してlog出力
$('#mytext1').data('key', 'this is mydata ');
log();

// mytext1、mytext3に値を設定してlog出力
$('#mytext1').data('key', 'this is mydata(updated!!)');
$('#mytext3').data('key', 'this is mydata(updated!!)');
log();


</script>

</body>
</html>
